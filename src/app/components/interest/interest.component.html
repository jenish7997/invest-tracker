<h2>Monthly Interest Rates</h2>

<form (ngSubmit)="saveRate()" [formGroup]="rateForm" class="grid">
  <div>
    <label>Month</label>
    <input type="month" formControlName="monthKey">
    <span *ngIf="rateForm.get('monthKey')?.invalid && rateForm.get('monthKey')?.touched" style="color:red">
      Please select a month
    </span>
  </div>

  <div>
    <label>Rate (e.g. 0.02 for 2%)</label>
    <input type="number" step="0.0001" min="0" formControlName="rate">
    <span *ngIf="rateForm.get('rate')?.invalid && rateForm.get('rate')?.touched" style="color:red">
      Enter a valid non-negative rate
    </span>
  </div>

  <button type="submit" [disabled]="rateForm.invalid">Save</button>
</form>

<table *ngIf="rates.length">
  <thead>
    <tr>
      <th>Month</th>
      <th>Rate</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let r of rates">
      <td>{{ r.monthKey }}</td>
      <td>{{ r.rate | percent:'1.2-2' }}</td>
    </tr>
  </tbody>
</table>
