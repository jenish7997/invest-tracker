<div class="page-container">
  <div class="page-header">
    <h1 class="page-title">
      <span class="page-icon">üí∏</span>
      Process Withdrawal
    </h1>
    <p class="page-subtitle">Withdraw money from an investor's portfolio</p>
  </div>

  <div class="form-card">
    <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="investor" class="form-label">Select Investor</label>
        <select 
          id="investor" 
          formControlName="investorId" 
          class="form-select"
          [class.error]="transactionForm.get('investorId')?.invalid && transactionForm.get('investorId')?.touched"
        >
          <option value="">-- Select Investor --</option>
          <option *ngFor="let inv of investors" [value]="inv.id">{{ inv.name }}</option>
        </select>
        <div *ngIf="transactionForm.get('investorId')?.invalid && transactionForm.get('investorId')?.touched" class="form-error">
          Investor is required
        </div>
      </div>

      <div class="form-group">
        <label for="amount" class="form-label">Withdrawal Amount</label>
        <div class="input-wrapper">
          <span class="input-prefix">‚Çπ</span>
          <input 
            id="amount" 
            type="number" 
            formControlName="amount" 
            class="form-input with-prefix"
            placeholder="0.00"
            [class.error]="transactionForm.get('amount')?.invalid && transactionForm.get('amount')?.touched"
          />
        </div>
        <div *ngIf="transactionForm.get('amount')?.invalid && transactionForm.get('amount')?.touched" class="form-error">
          Amount must be greater than 0
        </div>
      </div>

      <div class="form-group">
        <label for="date" class="form-label">Withdrawal Date</label>
        <input 
          id="date" 
          type="date" 
          formControlName="date" 
          class="form-input"
          [class.error]="transactionForm.get('date')?.invalid && transactionForm.get('date')?.touched"
        />
        <div *ngIf="transactionForm.get('date')?.invalid && transactionForm.get('date')?.touched" class="form-error">
          Date is required
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-danger" [disabled]="transactionForm.invalid || loading">
          <span *ngIf="loading" class="btn-spinner"></span>
          <span class="btn-icon">üí∏</span>
          {{ loading ? 'Processing...' : 'Process Withdrawal' }}
        </button>
      </div>
    </form>

    <!-- Messages -->
    <div *ngIf="successMessage" class="alert alert-success">
      <span class="alert-icon">‚úÖ</span>
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="alert alert-error">
      <span class="alert-icon">‚ùå</span>
      {{ errorMessage }}
    </div>
  </div>
</div>
